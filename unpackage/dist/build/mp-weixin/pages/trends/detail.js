(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/trends/detail"],{"2cfd":function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("253c")),r={components:{commentComp:function(){n.e("components/comment").then(function(){return resolve(n("f5f1"))}.bind(null,n)).catch(n.oe)}},data:function(){return{pageNum:1,pageSize:10,total:0,trends:{},followed:!1,commentList:[],isShowBtn:!1}},onLoad:function(t){this.getTrends(t.id),this.queryComment(1,10,t.id,4)},onReachBottom:function(){10*this.pageNum<this.total&&(this.pageNum++,this.queryComment(this.pageNum,this.pageSize,this.trends.id,4))},methods:{getTrends:function(e){var n=this;i.default.getTrends({id:e}).then((function(e){n.followed=e.data.isFocus,n.trends=e.data,n.isLink(e.data.creator);var o=t.getStorageSync("userInfo");e.data.creator!=o.id&&(n.isShowBtn=!0)}))},queryComment:function(e,n,o,r){var a=this;i.default.queryComment({page:e,limit:n,sourceType:r,sourceId:o,orderField:"create_date",order:"desc"}).then((function(e){0==e.code?(e.data.list.forEach((function(t){t.isUnfold=!1})),a.commentList=a.commentList.concat(e.data.list),a.total=e.data.total):t.showToast({title:e.msg,icon:"error"})}))},previewImage:function(e,n){t.previewImage({current:e[n],urls:e})},toCircleDetail:function(e){t.navigateTo({url:"/pages/circle/circleDetail?id=".concat(e)})},toUser:function(e){t.navigateTo({url:"/pages/my/user?userId=".concat(e)})},follow:function(e){var n=this;this.followed?i.default.updateMyLink({sourceId:this.trends.creator,category:"3",status:"1"}).then((function(e){10020!=e.code&&10021!=e.code?0==e.code?(n.isLink(n.trends.creator),n.followed=!1):t.showToast({title:e.msg,icon:"error"}):t.showToast({title:"未登录",icon:"error"})})):i.default.addMyLink({sourceId:this.trends.creator,category:"3",status:"0"}).then((function(e){10020!=e.code&&10021!=e.code?0==e.code?(n.isLink(n.trends.creator),n.followed=!0):t.showToast({title:e.msg,icon:"error"}):t.showToast({title:"未登录",icon:"error"})}))},more:function(){t.showToast({title:"功能完善中",icon:"none"})},isLink:function(t){var e=this;i.default.isLink({sourceId:t,category:"3"}).then((function(t){0==t.code&&(e.followed=t.data)}))},reloadComment:function(){this.pageNum=1,this.pageSize=10,this.commentList=[],this.queryComment(1,10,this.trends.id,"4")}}};e.default=r}).call(this,n("543d")["default"])},"2e24":function(t,e,n){},"3b1b":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var o=function(){var t=this.$createElement;this._self._c},i=[]},5766:function(t,e,n){"use strict";n.r(e);var o=n("2cfd"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},"83db":function(t,e,n){"use strict";var o=n("2e24"),i=n.n(o);i.a},"965d":function(t,e,n){"use strict";n.r(e);var o=n("3b1b"),i=n("5766");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("83db");var a=n("f0c5"),c=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=c.exports},f794:function(t,e,n){"use strict";(function(t){var e=n("4ea4");n("8cfb");e(n("66fd"));var o=e(n("965d"));wx.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("543d")["createPage"])}},[["f794","common/runtime","common/vendor"]]]);